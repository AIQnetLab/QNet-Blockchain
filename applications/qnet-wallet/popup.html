<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QNet Dual Wallet</title>
    <link rel="stylesheet" href="styles/popup.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <h2>QNet Dual Wallet</h2>
                <p>Initializing dual-network architecture...</p>
            </div>
        </div>

        <!-- Setup Screen -->
        <div id="setup-screen" class="screen hidden">
            <div class="setup-container">
                <div class="wallet-logo">üíé</div>
                <h2>Welcome to QNet Wallet</h2>
                <p>Your dual-network crypto wallet for Solana and QNet</p>
                
                <div class="setup-actions">
                    <button id="create-wallet-button" class="qnet-button primary gradient">
                        ‚ú® Create New Wallet
                    </button>
                    <button id="import-wallet-button" class="qnet-button secondary modern">
                        üì• Import Existing Wallet
                    </button>
                </div>
                
                <div class="setup-features">
                    <div class="feature-item">
                        <span class="feature-icon">üîí</span>
                        <span>Secure HD wallet with BIP39</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">üåê</span>
                        <span>Dual Solana + QNet support</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ü§ñ</span>
                        <span>Node activation & management</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Locked Screen -->
        <div id="locked-screen" class="screen hidden">
            <div class="lock-container">
                <div class="wallet-logo">üíé</div>
                <h2>QNet Dual Wallet</h2>
                <p>Enter password to unlock your dual-network wallet</p>
                
                <div class="password-section">
                    <input type="password" id="password-input" placeholder="Enter password" autocomplete="current-password" />
                    <div id="password-error" class="inline-error" style="display: none;"></div>
                    <button id="unlock-button" class="qnet-button primary">üîì Unlock Wallet</button>
                </div>
            </div>
        </div>

        <!-- Main Wallet Screen -->
        <div id="main-wallet-screen" class="screen hidden">
            <!-- Network Switcher -->
            <div class="network-switcher">
                <div class="network-tabs">
                    <button class="network-tab active" data-network="qnet">
                        <span class="network-icon">üíé</span>
                        <span>QNet</span>
                    </button>
                    <button class="network-tab" data-network="solana">
                        <span class="network-icon">üî•</span>
                        <span>Solana</span>
                    </button>
                </div>
                <div class="network-status" id="network-status"></div>
            </div>

            <!-- Header -->
            <header class="wallet-header">
                <div class="account-selector">
                    <button id="account-menu-button" class="account-menu-button">
                        <div class="account-info">
                            <span id="active-account-name">Account 1</span>
                            <span class="dropdown-arrow">‚ñº</span>
                        </div>
                    </button>
                </div>
                <div class="header-actions">
                    <button id="settings-button" class="settings-button" title="Settings">‚öôÔ∏è</button>
                    <button id="lock-wallet-btn" class="lock-button" title="Lock Wallet">üîí</button>
                </div>
            </header>

            <!-- Phase Indicator -->
            <div class="phase-indicator" id="phase-indicator">
                <div class="phase-info">
                    <span id="phase-text">Phase 1: 1DEV Burn Activation</span>
                    <span id="phase-progress">25% burned</span>
                </div>
            </div>

            <!-- Main Content -->
            <main class="wallet-main">
                <!-- Account Overview -->
                <section class="account-overview">
                    <div class="address-container">
                        <div id="account-address" class="account-address" title="Click to copy">
                            7a9bk4f2eon8x3m5z1c7
                        </div>
                        <button class="copy-btn" id="copy-address-btn">üìã</button>
                    </div>
                    <div class="balance-container">
                        <div id="total-balance" class="total-balance">$0.00</div>
                        <div id="network-balance" class="network-balance">0 QNC</div>
                    </div>
                </section>

                <!-- Quick Actions -->
                <section class="main-actions">
                    <button class="action-button modern" id="send-button" data-action="send">
                        <div class="action-icon">üì§</div>
                        <span>Send</span>
                    </button>
                    <button class="action-button modern" id="receive-button" data-action="receive">
                        <div class="action-icon">üì•</div>
                        <span>Receive</span>
                    </button>
                    <button class="action-button modern" id="swap-button" data-action="swap">
                        <div class="action-icon">üîÑ</div>
                        <span>Bridge</span>
                    </button>
                </section>

                <!-- Network-Specific Content -->
                <div id="network-content">
                    <!-- QNet Content -->
                    <div id="qnet-content" class="network-content active">
                        <!-- Tabs -->
                        <nav class="tabs-nav">
                            <button class="tab-button active" data-tab="qnet-tokens">Assets</button>
                            <button class="tab-button" data-tab="qnet-node">Node</button>
                            <button class="tab-button" data-tab="qnet-rewards">Rewards</button>
                        </nav>

                        <!-- QNet Assets Tab -->
                        <div class="tab-content" id="qnet-tokens-tab">
                            <ul id="qnet-token-list" class="token-list modern">
                                <!-- QNet tokens will be populated here -->
                            </ul>
                        </div>

                        <!-- QNet Node Tab -->
                        <div class="tab-content hidden" id="qnet-node-tab">
                            <div class="node-card modern" id="node-activation-card">
                                <div class="node-header">
                                    <h3>ü§ñ Node Management</h3>
                                    <p id="node-status-text">No active node</p>
                                </div>
                                
                                <div class="node-details" id="node-details">
                                    <!-- Will be populated based on node status -->
                                </div>
                                
                                <div class="node-actions" id="node-actions">
                                    <button id="activate-node-button" class="qnet-button primary gradient">
                                        üöÄ Activate Node
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- QNet Rewards Tab -->
                        <div class="tab-content hidden" id="qnet-rewards-tab">
                            <div class="rewards-card modern">
                                <h3>üí∞ Node Rewards</h3>
                                <div class="rewards-stats">
                                    <div class="stat-item">
                                        <span class="stat-value">0 QNC</span>
                                        <span class="stat-label">Daily Rewards</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-value">0 QNC</span>
                                        <span class="stat-label">Total Earned</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Solana Content -->
                    <div id="solana-content" class="network-content hidden">
                        <!-- Tabs -->
                        <nav class="tabs-nav">
                            <button class="tab-button active" data-tab="solana-tokens">Assets</button>
                            <button class="tab-button" data-tab="solana-activation">Activate</button>
                        </nav>

                        <!-- Solana Assets Tab -->
                        <div class="tab-content" id="solana-tokens-tab">
                            <ul id="solana-token-list" class="token-list modern">
                                <!-- Solana tokens will be populated here -->
                            </ul>
                        </div>

                        <!-- Solana Activation Tab -->
                        <div class="tab-content hidden" id="solana-activation-tab">
                            <div class="activation-card modern">
                                <div class="activation-header">
                                    <h3>üî• Phase 1 Activation</h3>
                                    <p>Burn 1DEV tokens to activate your QNet node</p>
                                </div>
                                
                                <div class="pricing-info" id="pricing-info">
                                    <div class="price-card">
                                        <span class="price-label">Current Price</span>
                                        <span class="price-value">1,350 1DEV</span>
                                        <span class="price-savings">150 1DEV saved (10%)</span>
                                    </div>
                                </div>
                                
                                <div class="node-type-selector">
                                    <div class="node-option active" data-type="light">
                                        <span class="node-emoji">‚ö°</span>
                                        <span class="node-name">Light Node</span>
                                    </div>
                                    <div class="node-option" data-type="full">
                                        <span class="node-emoji">üî•</span>
                                        <span class="node-name">Full Node</span>
                                    </div>
                                    <div class="node-option" data-type="super">
                                        <span class="node-emoji">‚≠ê</span>
                                        <span class="node-name">Super Node</span>
                                    </div>
                                </div>
                                
                                <button id="burn-activate-button" class="qnet-button primary gradient">
                                    üî• Burn & Activate
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal-overlay hidden">
            <div class="modal-box modern">
                <div class="modal-header">
                    <h3>‚öôÔ∏è Wallet Settings</h3>
                    <button id="close-settings" class="close-button">‚úï</button>
                </div>
                
                <div class="settings-content">
                    <div class="setting-group">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>üåê Network Environment</h4>
                                <p>Switch between testnet and mainnet</p>
                            </div>
                            <select id="network-select" class="setting-select modern">
                                <option value="testnet">üß™ Testnet (Development)</option>
                                <option value="mainnet">üöÄ Mainnet (Production)</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>üîí Auto-Lock Timer</h4>
                                <p>Automatically lock wallet after inactivity</p>
                            </div>
                            <select id="autolock-select" class="setting-select modern">
                                <option value="0">Never</option>
                                <option value="60">1 minute</option>
                                <option value="300" selected>5 minutes</option>
                                <option value="900">15 minutes</option>
                                <option value="1800">30 minutes</option>
                                <option value="3600">1 hour</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>üåê Language</h4>
                                <p>Wallet interface language</p>
                            </div>
                            <select id="language-select" class="setting-select modern">
                                <option value="en" selected>üá∫üá∏ English</option>
                                <option value="zh">üá®üá≥ ‰∏≠Êñá (Chinese)</option>
                                <option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥ (Korean)</option>
                                <option value="ja">üáØüáµ Êó•Êú¨Ë™û (Japanese)</option>
                                <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π (Russian)</option>
                                <option value="es">üá™üá∏ Espa√±ol (Spanish)</option>
                                <option value="pt">üáµüáπ Portugu√™s (Portuguese)</option>
                                <option value="fr">üá´üá∑ Fran√ßais (French)</option>
                                <option value="de">üá©üá™ Deutsch (German)</option>
                                <option value="it">üáÆüáπ Italiano (Italian)</option>
                                <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>üîê Security Options</h4>
                                <p>Manage wallet security settings</p>
                            </div>
                            <div class="setting-actions">
                                <button id="change-password-button" class="qnet-button secondary modern">Change Password</button>
                                <button id="show-seed-button" class="qnet-button secondary modern">Show Recovery Phrase</button>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>üîó Connected dApps</h4>
                                <p>Manage blockchain app connections</p>
                            </div>
                            <div class="setting-actions">
                                <button id="manage-connections-button" class="qnet-button secondary modern">Manage Connections</button>
                                <div id="connected-sites-count" class="setting-note">0 sites connected</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-group danger-zone">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>‚ö†Ô∏è Danger Zone</h4>
                                <p>Irreversible actions - use with extreme caution</p>
                            </div>
                            <div class="setting-actions">
                                <button id="reset-wallet-button" class="qnet-button danger modern">Reset Wallet</button>
                                <button id="clear-data-button" class="qnet-button danger modern">Clear All Data</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Receive Modal -->
        <div id="receive-modal" class="modal-overlay hidden">
            <div class="modal-box modern">
                <div class="modal-header">
                    <h3>üì• Receive <span id="receive-network-name">QNC</span></h3>
                    <button class="close-button" id="close-receive-modal">‚úï</button>
                </div>
                <div class="receive-content">
                    <div class="qr-container" id="qr-container">
                        <canvas id="qr-canvas"></canvas>
                    </div>
                    <div class="address-display">
                        <div class="address-text" id="receive-address">Loading...</div>
                        <button class="copy-address-btn" id="copy-receive-address-btn">üìã Copy Address</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Account Select Modal -->
        <div id="account-select-modal" class="modal-overlay hidden">
            <div class="modal-box modern">
                <div class="modal-header">
                    <h3>üë§ Select Account</h3>
                    <button id="close-account-select" class="close-button">‚úï</button>
                </div>
                
                <div id="account-list" class="account-list">
                    <!-- Accounts will be populated dynamically -->
                </div>
                
                <div class="modal-actions">
                    <button id="create-account-button" class="qnet-button secondary modern">‚ú® Create Account</button>
                    <button id="import-account-button" class="qnet-button secondary modern">üì• Import Account</button>
                </div>
            </div>
        </div>

        <!-- Wallet Setup Modal -->
        <div id="wallet-setup-modal" class="modal-overlay hidden">
            <div class="modal-box large modern">
                <div class="modal-header">
                    <h3 id="setup-modal-title">‚ú® Create New Wallet</h3>
                    <button id="close-setup" class="close-button">‚úï</button>
                </div>
                
                <div id="setup-content" class="setup-content">
                    <!-- Create Wallet -->
                    <div id="create-wallet-content" class="setup-step">
                        <div class="step-header">
                            <h4>Create Your QNet Dual Wallet</h4>
                            <p>Secure HD wallet supporting both Solana and QNet networks</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="new-password">Create Password</label>
                            <input type="password" id="new-password" placeholder="Enter a strong password" 
                                   autocomplete="new-password" minlength="8" />
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm-password">Confirm Password</label>
                            <input type="password" id="confirm-password" placeholder="Confirm your password" 
                                   autocomplete="new-password" minlength="8" />
                        </div>
                        
                        <div id="password-create-error" class="inline-error" style="display: none;"></div>
                        
                        <div class="password-requirements">
                            <p>Password requirements:</p>
                            <ul>
                                <li>At least 8 characters</li>
                                <li>Upper and lowercase letters</li>
                                <li>Numbers and special characters</li>
                            </ul>
                        </div>
                        
                        <button id="generate-wallet-button" class="qnet-button primary gradient full-width">
                            ‚ú® Generate Dual Wallet
                        </button>
                    </div>
                    
                    <!-- Import Wallet -->
                    <div id="import-wallet-content" class="setup-step hidden">
                        <div class="step-header">
                            <h4>Import Existing Wallet</h4>
                            <p>Import using 12 or 24-word recovery phrase (BIP39 compatible)</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="seed-phrase-input">Recovery Phrase</label>
                            <textarea id="seed-phrase-input" 
                                      placeholder="Enter your 12 or 24-word recovery phrase separated by spaces" 
                                      rows="4" autocomplete="off" spellcheck="false" autocorrect="off"></textarea>
                            <div class="input-hint">
                                Compatible with all standard BIP39 wallets
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="import-password">Set New Password</label>
                            <input type="password" id="import-password" placeholder="Create a password for this wallet" 
                                   autocomplete="new-password" minlength="8" />
                        </div>
                        
                        <div id="import-error" class="inline-error" style="display: none;"></div>
                        
                        <button id="import-wallet-confirm-button" class="qnet-button primary gradient full-width">
                            üì• Import Dual Wallet
                        </button>
                    </div>
                    
                    <!-- Seed Phrase Display -->
                    <div id="seed-phrase-display" class="setup-step hidden">
                        <div class="step-header">
                            <h4>‚ö†Ô∏è Save Your Recovery Phrase</h4>
                            <p>Write down these 12 words in order and keep them safe:</p>
                        </div>
                        
                        <div id="seed-phrase-words" class="seed-phrase-grid">
                            <!-- Seed words will be populated here -->
                        </div>
                        
                        <div class="seed-actions">
                            <button id="copy-seed-button" class="qnet-button secondary modern">
                                üìã Copy to Clipboard
                            </button>
                            <button id="download-seed-button" class="qnet-button secondary modern">
                                üíæ Download as File
                            </button>
                        </div>
                        
                        <div class="seed-warnings">
                            <div class="warning-item">
                                <span class="warning-icon">‚ö†Ô∏è</span>
                                <span>Never share your recovery phrase with anyone!</span>
                            </div>
                            <div class="warning-item">
                                <span class="warning-icon">üîí</span>
                                <span>QNet cannot recover lost recovery phrases.</span>
                            </div>
                            <div class="warning-item">
                                <span class="warning-icon">üí°</span>
                                <span>Store multiple copies in secure locations.</span>
                            </div>
                        </div>
                        
                        <button id="seed-confirmed-button" class="qnet-button primary gradient full-width">
                            ‚úÖ I've Saved My Recovery Phrase
                        </button>
                    </div>
                    
                    <!-- Seed Phrase Verification -->
                    <div id="seed-verification" class="setup-step hidden">
                        <div class="step-header">
                            <h4>üîç Verify Your Recovery Phrase</h4>
                            <p>Select the correct words to confirm you saved it correctly:</p>
                        </div>
                        
                        <div id="verification-fields" class="verification-container">
                            <!-- Verification fields will be populated here -->
                        </div>
                        
                        <div id="verification-error" class="inline-error" style="display: none;"></div>
                        
                        <div class="verification-actions">
                            <button id="back-to-seed-button" class="qnet-button secondary modern">
                                ‚Üê Back to Recovery Phrase
                            </button>
                            <button id="verify-seed-button" class="qnet-button primary gradient" disabled>
                                ‚úÖ Verify & Complete Setup
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Seed Phrase Modal -->
        <div id="seed-phrase-modal" class="modal-overlay hidden">
            <div class="modal-box large modern">
                <div class="modal-header">
                    <h3>üîë Your Recovery Phrase</h3>
                    <button class="close-button">‚úï</button>
                </div>
                
                <div class="seed-phrase-content">
                    <div class="warning-banner">
                        <span class="warning-icon">‚ö†Ô∏è</span>
                        <span>Never share your recovery phrase with anyone!</span>
                    </div>
                    
                    <div id="seed-phrase-container" class="seed-phrase-grid">
                        <!-- Seed words will be populated here -->
                    </div>
                    
                    <div class="seed-actions">
                        <button id="copy-seed-button" class="qnet-button secondary modern">
                            üìã Copy to Clipboard
                        </button>
                        <button id="download-seed-button" class="qnet-button secondary modern">
                            üíæ Download as File
                        </button>
                    </div>
                    
                    <div class="seed-warnings">
                        <div class="warning-item">
                            <span class="warning-icon">üîí</span>
                            <span>QNet cannot recover lost recovery phrases</span>
                        </div>
                        <div class="warning-item">
                            <span class="warning-icon">üí°</span>
                            <span>Store multiple copies in secure locations</span>
                        </div>
                    </div>
                    
                    <button id="seed-confirmed-button" class="qnet-button primary gradient full-width">
                        ‚úÖ I've Saved My Recovery Phrase
                    </button>
                </div>
            </div>
        </div>

        <!-- Seed Verification Modal -->
        <div id="seed-verification-modal" class="modal-overlay hidden">
            <div class="modal-box large modern">
                <div class="modal-header">
                    <h3>üîç Verify Recovery Phrase</h3>
                    <button class="close-button">‚úï</button>
                </div>
                
                <div class="verification-content">
                    <p>Please enter the following words from your recovery phrase in ascending order:</p>
                    
                    <div id="verification-container" class="verification-inputs">
                        <!-- Verification inputs will be populated here -->
                    </div>
                    
                    <div class="verification-actions">
                        <button id="verify-seed-button" class="qnet-button primary gradient full-width">
                            ‚úÖ Verify & Continue
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Password Setup Modal -->
        <div id="password-setup-modal" class="modal-overlay hidden">
            <div class="modal-box modern">
                <div class="modal-header">
                    <h3>üîê Set Wallet Password</h3>
                    <button class="close-button">‚úï</button>
                </div>
                
                <div class="password-setup-content">
                    <div class="form-group">
                        <label for="setup-password">Create Password</label>
                        <input type="password" id="setup-password" placeholder="Enter a strong password" 
                               autocomplete="new-password" minlength="8" />
                    </div>
                    
                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <input type="password" id="confirm-password" placeholder="Confirm your password" 
                               autocomplete="new-password" minlength="8" />
                    </div>
                    
                    <div class="password-requirements">
                        <p>Password requirements:</p>
                        <ul>
                            <li>At least 8 characters</li>
                            <li>Recommended: mix of letters, numbers, and symbols</li>
                        </ul>
                    </div>
                    
                    <button id="create-wallet-final-button" class="qnet-button primary gradient full-width">
                        üöÄ Create Wallet
                    </button>
                </div>
            </div>
        </div>

        <!-- Import Wallet Modal -->
        <div id="import-wallet-modal" class="modal-overlay hidden">
            <div class="modal-box modern">
                <div class="modal-header">
                    <h3>üì• Import Wallet</h3>
                    <button class="close-button">‚úï</button>
                </div>
                
                <div class="import-content">
                    <div class="form-group">
                        <label for="import-seed-phrase">Recovery Phrase</label>
                        <textarea id="import-seed-phrase" 
                                  placeholder="Enter your 12-word recovery phrase separated by spaces" 
                                  rows="4" autocomplete="off" spellcheck="false" autocorrect="off"></textarea>
                        <div class="input-hint">
                            Compatible with all standard BIP39 wallets
                        </div>
                    </div>
                    
                    <button id="import-confirm-button" class="qnet-button primary gradient full-width">
                        üì• Import Wallet
                    </button>
                </div>
            </div>
        </div>

    </div>

    <!-- Load production version with working interface -->
    <script src="popup.js"></script>
</body>
</html> 