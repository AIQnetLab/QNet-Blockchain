<!DOCTYPE html>
<html>
<head>
    <title>QNet Wallet Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 800px; margin: 0 auto; }
        button { padding: 15px 25px; margin: 10px; font-size: 16px; cursor: pointer; }
        .result { background: #2a2a2a; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .seed-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 10px; 
            margin: 20px 0; 
            background: #333; 
            padding: 20px; 
            border-radius: 10px; 
        }
        .seed-word { 
            padding: 10px; 
            background: #444; 
            border-radius: 5px; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
        }
        .word-number { color: #888; font-size: 12px; min-width: 20px; }
        .word-text { font-weight: bold; color: #00ffff; }
        .error { color: #ff4444; }
        .success { color: #44ff44; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß QNet Wallet Debug Test</h1>
        
        <button onclick="testFallbackMnemonic()">Test Fallback Mnemonic</button>
        <button onclick="testDisplaySeedPhrase()">Test Display Seed Phrase</button>
        <button onclick="testFullProcess()">Test Full Process</button>
        
        <div id="results"></div>
        
        <div id="seed-display" style="display: none;">
            <h3>Generated Seed Phrase:</h3>
            <div id="seed-phrase-words" class="seed-grid"></div>
        </div>
    </div>

    <script>
        // Mock SecureCrypto for testing
        class SecureCrypto {
            static generateMnemonic() {
                const wordlist = [
                    'abandon', 'ability', 'able', 'about', 'above', 'absent', 'absorb', 'abstract',
                    'absurd', 'abuse', 'access', 'accident', 'account', 'accuse', 'achieve', 'acid',
                    'acoustic', 'acquire', 'across', 'act', 'action', 'actor', 'actress', 'actual',
                    'adapt', 'add', 'addict', 'address', 'adjust', 'admit', 'adult', 'advance',
                    'advice', 'aerobic', 'affair', 'afford', 'afraid', 'again', 'against', 'age',
                    'agent', 'agree', 'ahead', 'aim', 'air', 'airport', 'aisle', 'alarm',
                    'album', 'alcohol', 'alert', 'alien', 'all', 'alley', 'allow', 'almost',
                    'alone', 'alpha', 'already', 'also', 'alter', 'always', 'amateur', 'amazing',
                    'among', 'amount', 'amused', 'analyst', 'anchor', 'ancient', 'anger', 'angle',
                    'angry', 'animal', 'ankle', 'announce', 'annual', 'another', 'answer', 'antenna',
                    'antique', 'anxiety', 'any', 'apart', 'apology', 'appear', 'apple', 'approve',
                    'april', 'arch', 'arctic', 'area', 'arena', 'argue', 'arm', 'armed',
                    'armor', 'army', 'around', 'arrange', 'arrest', 'arrive', 'arrow', 'art'
                ];

                try {
                    const words = [];
                    for (let i = 0; i < 12; i++) {
                        const randomIndex = crypto.getRandomValues(new Uint32Array(1))[0] % wordlist.length;
                        words.push(wordlist[randomIndex]);
                    }
                    
                    const mnemonic = words.join(' ');
                    console.log('üîë Generated fallback mnemonic:', mnemonic);
                    return mnemonic;
                } catch (error) {
                    console.error('Fallback mnemonic generation failed:', error);
                    return 'abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about';
                }
            }
        }

        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
            results.appendChild(div);
            console.log(message);
        }

        function testFallbackMnemonic() {
            log('üîß Testing fallback mnemonic generation...');
            
            try {
                const mnemonic = SecureCrypto.generateMnemonic();
                log(`‚úÖ Generated mnemonic: ${mnemonic}`, 'success');
                log(`‚úÖ Word count: ${mnemonic.split(' ').length}`, 'success');
                log(`‚úÖ Type: ${typeof mnemonic}`, 'success');
                
                return mnemonic;
            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
                return null;
            }
        }

        function displaySeedPhrase(mnemonic) {
            log('üîç displaySeedPhrase called with: ' + mnemonic);
            
            if (!mnemonic) {
                log('‚ùå No mnemonic provided to displaySeedPhrase', 'error');
                return;
            }
            
            const words = mnemonic.split(' ');
            log(`üîç Split words: ${words.length} words`);
            
            const seedPhraseGrid = document.getElementById('seed-phrase-words');
            
            if (!seedPhraseGrid) {
                log('‚ùå seed-phrase-words element not found', 'error');
                return;
            }

            seedPhraseGrid.innerHTML = '';
            
            words.forEach((word, index) => {
                log(`üîç Processing word ${index + 1}: "${word}"`);
                const wordElement = document.createElement('div');
                wordElement.className = 'seed-word';
                wordElement.innerHTML = `
                    <span class="word-number">${index + 1}</span>
                    <span class="word-text">${word}</span>
                `;
                seedPhraseGrid.appendChild(wordElement);
            });
            
            log('üîç Final grid HTML length: ' + seedPhraseGrid.innerHTML.length);
            
            document.getElementById('seed-display').style.display = 'block';
            
            log('‚úÖ displaySeedPhrase completed', 'success');
        }

        function testDisplaySeedPhrase() {
            log('üîß Testing seed phrase display...');
            
            const testMnemonic = 'abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about';
            displaySeedPhrase(testMnemonic);
        }

        function testFullProcess() {
            log('üîß Testing full wallet creation process...');
            
            const mnemonic = testFallbackMnemonic();
            if (mnemonic) {
                displaySeedPhrase(mnemonic);
                log('‚úÖ Full process completed successfully', 'success');
            } else {
                log('‚ùå Full process failed', 'error');
            }
        }

        // Auto-run basic test
        window.addEventListener('load', () => {
            log('üöÄ Debug test page loaded');
            testFallbackMnemonic();
        });
    </script>
</body>
</html> 