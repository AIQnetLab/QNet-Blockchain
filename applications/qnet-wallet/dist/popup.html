<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QNet Dual Wallet</title>
    <link rel="stylesheet" href="styles/popup.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <h2>QNet Dual Wallet</h2>
                <p>Initializing dual-network architecture...</p>
            </div>
        </div>

        <!-- Setup Options Screen -->
        <div id="setup-options-screen" class="screen hidden">
            <div class="setup-container">
                <div class="wallet-logo">QNet</div>
                <h2>QNet Dual Wallet</h2>
                <p>Professional dual-network cryptocurrency wallet</p>
                
                <div class="setup-options">
                    <button id="create-wallet-button" class="qnet-button primary gradient full-width">
                        <div class="button-content">
                            <div class="button-icon">+</div>
                            <div class="button-text">
                                <span class="button-title">Create New Wallet</span>
                                <span class="button-subtitle">Generate a new dual-network wallet</span>
                            </div>
                        </div>
                    </button>
                    
                    <button id="import-wallet-button" class="qnet-button secondary gradient full-width">
                        <div class="button-content">
                            <div class="button-icon">↑</div>
                            <div class="button-text">
                                <span class="button-title">Import Wallet</span>
                                <span class="button-subtitle">Import from recovery phrase</span>
                            </div>
                        </div>
                    </button>
                </div>
                
                <div class="setup-footer">
                    <p>Your keys, your crypto. Always secure.</p>
                </div>
            </div>
        </div>

        <!-- Locked Screen -->
        <div id="locked-screen" class="screen hidden">
            <div class="phantom-lock-container">
                <div class="lock-header-top">
                    <h1 class="wallet-title">QNet</h1>
                </div>
                
                <div class="lock-content">
                    <div class="qnet-emblem">
                        <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                            <circle cx="40" cy="40" r="35" fill="url(#qnetGradient)" stroke="rgba(0,212,255,0.3)" stroke-width="2"/>
                            <g transform="translate(40, 40)">
                                <path d="M-12 -8 L0 -20 L12 -8 L0 4 Z" fill="white" opacity="0.9"/>
                                <path d="M-10 8 L10 8 M-6 13 L6 13 M-3 18 L3 18" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                <circle cx="0" cy="-10" r="2.5" fill="white"/>
                                <circle cx="-8" cy="0" r="1.5" fill="white" opacity="0.7"/>
                                <circle cx="8" cy="0" r="1.5" fill="white" opacity="0.7"/>
                            </g>
                            <defs>
                                <linearGradient id="qnetGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#00d4ff;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#0099cc;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    
                    <div class="lock-form">
                        <input type="password" id="password-input" class="phantom-password-input" placeholder="Password" autocomplete="current-password" />
                        <div id="password-error" class="phantom-error-message hidden"></div>
                        <button id="unlock-button" class="phantom-unlock-btn">Unlock wallet</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Wallet Screen -->
        <div id="main-wallet-screen" class="screen hidden">
            <!-- Compact Header -->
            <header class="compact-header">
                <div class="header-left">
                    <div class="wallet-logo-small">QNet</div>
                    <div class="network-switcher-compact">
                        <button class="network-tab active" data-network="qnet">QNet</button>
                        <button class="network-tab" data-network="solana">Solana</button>
                    </div>
                </div>
                <div class="header-right">
                    <button id="expand-wallet-btn" class="header-btn" title="Open Full Application">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7 14H5V19H10V17H7V14ZM12 10H14V7H17V5H12V10Z"/>
                        </svg>
                    </button>
                    <button id="settings-button" class="header-btn" title="Settings">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 8C13.1 8 14 8.9 14 10S13.1 12 12 12 10 11.1 10 10 10.9 8 12 8Z"/>
                        </svg>
                    </button>
                    <button id="lock-wallet-btn" class="header-btn lock-btn" title="Lock Wallet">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18 8H17V6C17 3.24 14.76 1 12 1S7 3.24 7 6V8H6C4.9 8 4 8.9 4 10V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V10C20 8.9 19.1 8 18 8Z"/>
                        </svg>
                    </button>
                </div>
            </header>

            <!-- Compact Balance Section -->
            <section class="balance-section-compact">
                <div class="address-row">
                    <div id="account-address" class="address-full" title="Click to copy">
                        Loading...
                    </div>
                    <button id="copy-address-btn" class="copy-btn" title="Copy Address">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z"/>
                        </svg>
                    </button>
                </div>
                <div class="balance-row">
                    <div class="balance-main">
                        <div id="total-balance" class="balance-amount">$0.00</div>
                        <div id="network-balance" class="balance-network">Loading...</div>
                    </div>
                    <div class="balance-actions">
                        <button id="quick-send-btn" class="quick-action-btn" title="Quick Send">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2 21L23 12L2 3V10L17 12L2 14V21Z"/>
                            </svg>
                        </button>
                        <button id="quick-receive-btn" class="quick-action-btn" title="Quick Receive">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M22 3L13 12L22 21L20 23L9 12L20 1L22 3Z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Main Tab Navigation -->
            <nav class="main-tab-nav">
                <button class="main-tab active" data-tab="assets">Assets</button>
                <button class="main-tab" data-tab="send">Send</button>
                <button class="main-tab" data-tab="receive">Receive</button>
                <button class="main-tab" data-tab="activate">Activate</button>
                <button class="main-tab" data-tab="history">History</button>
            </nav>

            <!-- Tab Content Container -->
            <main class="tab-content-container">
                <!-- Assets Tab -->
                <div id="assets-tab" class="tab-content active">
                    <div class="content-scroll">
                        <div id="network-content">
                            <!-- QNet Assets -->
                            <div id="qnet-content" class="network-content active">
                                <ul id="qnet-token-list" class="token-list compact">
                                    <!-- QNet tokens will be populated here -->
                                </ul>
                            </div>
                            
                            <!-- Solana Assets -->
                            <div id="solana-content" class="network-content hidden">
                                <ul id="solana-token-list" class="token-list compact">
                                    <!-- Solana tokens will be populated here -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Send Tab -->
                <div id="send-tab" class="tab-content hidden">
                    <div class="content-scroll">
                        <div class="send-form">
                            <div class="form-group">
                                <label>To Address</label>
                                <input type="text" id="send-address" placeholder="Enter recipient address" />
                            </div>
                            <div class="form-group">
                                <label>Amount</label>
                                <div class="amount-input-group">
                                    <input type="number" id="send-amount" placeholder="0.00" />
                                    <select id="send-token">
                                        <option value="qnc">QNC</option>
                                        <option value="sol">SOL</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Network Fee</label>
                                <div class="fee-selector">
                                    <button class="fee-option active" data-fee="standard">Standard</button>
                                    <button class="fee-option" data-fee="priority">Priority</button>
                                </div>
                            </div>
                            <button id="send-confirm-btn" class="action-btn primary">Send Transaction</button>
                        </div>
                    </div>
                </div>

                <!-- Receive Tab -->
                <div id="receive-tab" class="tab-content hidden">
                    <div class="content-scroll">
                        <div class="receive-content">
                            <div class="qr-container">
                                <canvas id="qr-canvas"></canvas>
                            </div>
                            <div class="address-display">
                                <label>Your Address</label>
                                <div class="address-text" id="receive-address">Loading...</div>
                                <button id="copy-receive-address" class="copy-btn">Copy Address</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Activate Tab -->
                <div id="activate-tab" class="tab-content hidden">
                    <div class="content-scroll">
                        <div class="activate-content">
                            <div class="phase-indicator compact">
                                <div class="phase-info">
                                    <span id="phase-text">Phase 1: 1DEV Burn Activation</span>
                                    <span id="phase-progress">25% burned</span>
                                </div>
                            </div>
                            
                            <div class="node-management">
                                <h3>Node Management</h3>
                                <div class="node-status" id="node-status">
                                    <span>Status: Not Active</span>
                                    <button id="activate-node-btn" class="action-btn secondary">Activate Node</button>
                                </div>
                                
                                <div class="node-options" id="node-options">
                                    <div class="node-option" data-type="light">
                                        <span class="node-emoji">💡</span>
                                        <span class="node-name">Light Node</span>
                                        <span class="node-price">1 DEV</span>
                                    </div>
                                    <div class="node-option" data-type="full">
                                        <span class="node-emoji">🔋</span>
                                        <span class="node-name">Full Node</span>
                                        <span class="node-price">10 DEV</span>
                                    </div>
                                    <div class="node-option" data-type="super">
                                        <span class="node-emoji">⚡</span>
                                        <span class="node-name">Super Node</span>
                                        <span class="node-price">100 DEV</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- History Tab -->
                <div id="history-tab" class="tab-content hidden">
                    <div class="content-scroll">
                        <div class="history-content">
                            <div class="history-filters">
                                <select id="history-filter">
                                    <option value="all">All Transactions</option>
                                    <option value="sent">Sent</option>
                                    <option value="received">Received</option>
                                    <option value="swap">Swapped</option>
                                </select>
                            </div>
                            <div id="transaction-list" class="transaction-list">
                                <!-- Transaction history will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal-overlay hidden">
                                <div class="modal-box modern modern-style">
                <div class="modal-header">
                    <h3>Wallet Settings</h3>
                    <button id="close-settings" class="close-button">✕</button>
                </div>
                
                <div class="settings-content modern-content">
                    <div class="setting-group">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Network Environment</h4>
                                <p>Switch between testnet and mainnet</p>
                            </div>
                            <div class="setting-actions">
                                <button id="network-select-btn" class="qnet-button secondary modern">
                                    <span>Testnet (Development)</span>
                                    <span class="arrow">→</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Auto-Lock Timer</h4>
                                <p>Automatically lock wallet after inactivity</p>
                            </div>
                            <div class="setting-actions">
                                <button id="autolock-select-btn" class="qnet-button secondary modern">
                                    <span>15 minutes</span>
                                    <span class="arrow">→</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Language</h4>
                                <p>Wallet interface language</p>
                            </div>
                            <div class="setting-actions">
                                <button id="language-select-btn" class="qnet-button secondary modern">
                                    <span>Русский (Russian)</span>
                                    <span class="arrow">→</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Security Options</h4>
                                <p>Manage wallet security settings</p>
                            </div>
                            <div class="setting-actions">
                                <button id="change-password-button" class="qnet-button secondary modern">
                                    <span>Change Password</span>
                                    <span class="arrow">→</span>
                                </button>
                                <button id="show-seed-button" class="qnet-button secondary modern">
                                    <span>Show Recovery Phrase</span>
                                    <span class="arrow">→</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Connected dApps</h4>
                                <p>Manage blockchain app connections</p>
                            </div>
                            <div class="setting-actions">
                                <button id="manage-connections-button" class="qnet-button secondary modern">
                                    <span>Manage Connections</span>
                                    <span class="arrow">→</span>
                                </button>
                                <div id="connected-sites-count" class="setting-note">0 sites connected</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-group danger-zone">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Danger Zone</h4>
                                <p>Irreversible actions - use with extreme caution</p>
                            </div>
                            <div class="setting-actions">
                                <button id="reset-wallet-button" class="qnet-button danger modern">
                                    <span>Reset Wallet</span>
                                    <span class="arrow">→</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Receive Modal -->
        <div id="receive-modal" class="modal-overlay hidden">
            <div class="modal-box modern">
                <div class="modal-header">
                    <h3>Receive <span id="receive-network-name">QNC</span></h3>
                    <button class="close-button" id="close-receive-modal">✕</button>
                </div>
                <div class="receive-content">
                    <div class="qr-container" id="qr-container">
                        <canvas id="qr-canvas"></canvas>
                    </div>
                    <div class="address-display">
                        <div class="address-text" id="receive-address">Loading...</div>
                        <button class="copy-address-btn" id="copy-receive-address-btn">Copy Address</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Account Select Modal -->
        <div id="account-select-modal" class="modal-overlay hidden">
            <div class="modal-box modern">
                <div class="modal-header">
                    <h3>👤 Select Account</h3>
                    <button id="close-account-select" class="close-button">✕</button>
                </div>
                
                <div id="account-list" class="account-list">
                    <!-- Accounts will be populated dynamically -->
                </div>
                
                <div class="modal-actions">
                    <button id="create-account-button" class="qnet-button secondary modern">Create Account</button>
                    <button id="import-account-button" class="qnet-button secondary modern">Import Account</button>
                </div>
            </div>
        </div>

        <!-- Wallet Setup Modal -->
        <div id="wallet-setup-modal" class="modal-overlay hidden">
            <div class="modal-box large modern">
                <div class="modal-header">
                    <h3 id="setup-modal-title">Create New Wallet</h3>
                    <button id="close-setup" class="close-button">✕</button>
                </div>
                
                <div id="setup-content" class="setup-content">
                    <!-- Create Wallet -->
                    <div id="create-wallet-content" class="setup-step">
                        <div class="step-header">
                            <h4>Create Your QNet Dual Wallet</h4>
                            <p>Secure HD wallet supporting both Solana and QNet networks</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="new-password">Create Password</label>
                            <input type="password" id="new-password" placeholder="Enter a strong password" 
                                   autocomplete="new-password" minlength="8" />
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm-password">Confirm Password</label>
                            <input type="password" id="confirm-password" placeholder="Confirm your password" 
                                   autocomplete="new-password" minlength="8" />
                        </div>
                        
                        <div id="password-create-error" class="inline-error hidden"></div>
                        
                        <div class="password-requirements">
                            <p>Password requirements:</p>
                            <ul>
                                <li>At least 8 characters</li>
                                <li>Upper and lowercase letters</li>
                                <li>Numbers and special characters</li>
                            </ul>
                        </div>
                        
                        <button id="generate-wallet-button" class="qnet-button primary gradient full-width">
                            Generate Dual Wallet
                        </button>
                    </div>
                    
                    <!-- Import Wallet -->
                    <div id="import-wallet-content" class="setup-step hidden">
                        <div class="step-header">
                            <h4>Import Existing Wallet</h4>
                            <p>Import using 12 or 24-word recovery phrase (BIP39 compatible)</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="seed-phrase-input">Recovery Phrase</label>
                            <textarea id="seed-phrase-input" 
                                      placeholder="Enter your 12 or 24-word recovery phrase separated by spaces" 
                                      rows="4" autocomplete="off" spellcheck="false" autocorrect="off"></textarea>
                            <div class="input-hint">
                                Compatible with all standard BIP39 wallets
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="import-password">Set New Password</label>
                            <input type="password" id="import-password" placeholder="Create a password for this wallet" 
                                   autocomplete="new-password" minlength="8" />
                        </div>
                        
                        <div id="import-error" class="inline-error hidden"></div>
                        
                        <button id="import-wallet-confirm-button" class="qnet-button primary gradient full-width">
                            Import Dual Wallet
                        </button>
                    </div>
                    
                    <!-- Seed Phrase Display -->
                    <div id="seed-phrase-display" class="setup-step hidden">
                        <div class="step-header">
                            <h4>Save Your Recovery Phrase</h4>
                            <p>Write down these 12 words in order and keep them safe:</p>
                        </div>
                        
                        <div id="seed-phrase-words" class="seed-phrase-grid">
                            <!-- Seed words will be populated here -->
                        </div>
                        
                        <div class="seed-actions">
                            <button id="copy-seed-button" class="qnet-button secondary modern">
                                Copy to Clipboard
                            </button>
                            <button id="download-seed-button" class="qnet-button secondary modern">
                                Download as File
                            </button>
                        </div>
                        
                        <div class="seed-warnings">
                            <div class="warning-item">
                                <span class="warning-icon">!</span>
                                <span>Never share your recovery phrase with anyone!</span>
                            </div>
                            <div class="warning-item">
                                <span class="warning-icon">•</span>
                                <span>QNet cannot recover lost recovery phrases.</span>
                            </div>
                            <div class="warning-item">
                                <span class="warning-icon">i</span>
                                <span>Store multiple copies in secure locations.</span>
                            </div>
                        </div>
                        
                        <button id="seed-confirmed-button" class="qnet-button primary gradient full-width">
                            I've Saved My Recovery Phrase
                        </button>
                    </div>
                    
                    <!-- Seed Phrase Verification -->
                    <div id="seed-verification" class="setup-step hidden">
                        <div class="step-header">
                            <h4>Verify Your Recovery Phrase</h4>
                            <p>Select the correct words to confirm you saved it correctly:</p>
                        </div>
                        
                        <div id="verification-fields" class="verification-container">
                            <!-- Verification fields will be populated here -->
                        </div>
                        
                        <div id="verification-error" class="inline-error hidden"></div>
                        
                        <div class="verification-actions">
                            <button id="back-to-seed-button" class="qnet-button secondary modern">
                                ← Back to Recovery Phrase
                            </button>
                            <button id="verify-seed-button" class="qnet-button primary gradient" disabled>
                                Verify & Complete Setup
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load production version with working interface -->
    <script src="popup.js"></script>
</body>
</html> 