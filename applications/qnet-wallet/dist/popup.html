<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QNet Dual Wallet</title>
    <link rel="stylesheet" href="styles/popup.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <h2>QNet Dual Wallet</h2>
                <p>Initializing dual-network architecture...</p>
            </div>
        </div>

        <!-- Setup Options Screen -->
        <div id="setup-options-screen" class="screen hidden">
            <div class="setup-container">
                <div class="wallet-logo">QNet</div>
                <h2>QNet Dual Wallet</h2>
                <p>Professional dual-network cryptocurrency wallet</p>
                
                <div class="setup-options">
                    <button id="create-wallet-button" class="qnet-button primary gradient full-width">
                        <div class="button-content">
                            <div class="button-icon">+</div>
                            <div class="button-text">
                                <span class="button-title">Create New Wallet</span>
                                <span class="button-subtitle">Generate a new dual-network wallet</span>
                            </div>
                        </div>
                    </button>
                    
                    <button id="import-wallet-button" class="qnet-button secondary gradient full-width">
                        <div class="button-content">
                            <div class="button-icon">↑</div>
                            <div class="button-text">
                                <span class="button-title">Import Wallet</span>
                                <span class="button-subtitle">Import from recovery phrase</span>
                            </div>
                        </div>
                    </button>
                </div>
                
                <div class="setup-footer">
                    <p>Your keys, your crypto. Always secure.</p>
                </div>
            </div>
        </div>

        <!-- Locked Screen -->
        <div id="locked-screen" class="screen hidden">
            <div class="lock-container">
                <div class="wallet-logo">QNet</div>
                <h2>QNet Dual Wallet</h2>
                <p>Enter password to unlock your dual-network wallet</p>
                
                <div class="password-section">
                    <input type="password" id="password-input" placeholder="Enter password" autocomplete="current-password" />
                    <div id="password-error" class="inline-error hidden"></div>
                    <button id="unlock-button" class="qnet-button primary">Unlock Wallet</button>
                </div>
            </div>
        </div>

        <!-- Main Wallet Screen -->
        <div id="main-wallet-screen" class="screen hidden">
            <!-- Network Switcher -->
            <div class="network-switcher">
                <div class="network-tabs">
                    <button class="network-tab active" data-network="qnet">
                        <span class="network-icon">Q</span>
                        <span>QNet</span>
                    </button>
                    <button class="network-tab" data-network="solana">
                        <span class="network-icon">S</span>
                        <span>Solana</span>
                    </button>
                </div>
                <div class="network-status" id="network-status"></div>
            </div>

            <!-- Header -->
            <header class="wallet-header">
                <div class="account-selector">
                    <button id="account-menu-button" class="account-menu-button">
                        <div class="account-info">
                            <span id="active-account-name">Account 1</span>
                            <span class="dropdown-arrow">▼</span>
                        </div>
                    </button>
                </div>
                <div class="header-actions">
                    <button id="settings-button" class="settings-button" title="Settings">⚙</button>
                    <button id="lock-wallet-btn" class="lock-button" title="Lock Wallet">🔒</button>
                </div>
            </header>

            <!-- Phase Indicator -->
            <div class="phase-indicator" id="phase-indicator">
                <div class="phase-info">
                    <span id="phase-text">Phase 1: 1DEV Burn Activation</span>
                    <span id="phase-progress">25% burned</span>
                </div>
            </div>

            <!-- Main Content -->
            <main class="wallet-main">
                <!-- Account Overview -->
                <section class="account-overview">
                    <div class="address-container">
                        <div id="account-address" class="account-address" title="Click to copy">
                            7a9bk4f2eon8x3m5z1c7
                        </div>
                        <button class="copy-btn" id="copy-address-btn">📋</button>
                    </div>
                    <div class="balance-container">
                        <div id="total-balance" class="total-balance">$0.00</div>
                        <div id="network-balance" class="network-balance">0 QNC</div>
                    </div>
                </section>

                <!-- Quick Actions -->
                <section class="main-actions">
                    <button class="action-button modern" id="send-button" data-action="send">
                        <div class="action-icon">↗</div>
                        <span>Send</span>
                    </button>
                    <button class="action-button modern" id="receive-button" data-action="receive">
                        <div class="action-icon">↙</div>
                        <span>Receive</span>
                    </button>
                    <button class="action-button modern" id="swap-button" data-action="swap">
                        <div class="action-icon">⟷</div>
                        <span>Bridge</span>
                    </button>
                </section>

                <!-- Network-Specific Content -->
                <div id="network-content">
                    <!-- QNet Content -->
                    <div id="qnet-content" class="network-content active">
                        <!-- Tabs -->
                        <nav class="tabs-nav">
                            <button class="tab-button active" data-tab="qnet-tokens">Assets</button>
                            <button class="tab-button" data-tab="qnet-node">Node</button>
                            <button class="tab-button" data-tab="qnet-rewards">Rewards</button>
                        </nav>

                        <!-- QNet Assets Tab -->
                        <div class="tab-content" id="qnet-tokens-tab">
                            <ul id="qnet-token-list" class="token-list modern">
                                <!-- QNet tokens will be populated here -->
                            </ul>
                        </div>

                        <!-- QNet Node Tab -->
                        <div class="tab-content hidden" id="qnet-node-tab">
                            <div class="node-card modern" id="node-activation-card">
                                <div class="node-header">
                                    <h3>Node Management</h3>
                                    <p id="node-status-text">No active node</p>
                                </div>
                                
                                <div class="node-details" id="node-details">
                                    <!-- Will be populated based on node status -->
                                </div>
                                
                                <div class="node-actions" id="node-actions">
                                    <button id="activate-node-button" class="qnet-button primary gradient">
                                        Activate Node
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- QNet Rewards Tab -->
                        <div class="tab-content hidden" id="qnet-rewards-tab">
                            <div class="rewards-card modern">
                                <h3>Node Rewards</h3>
                                <div class="rewards-stats">
                                    <div class="stat-item">
                                        <span class="stat-value">0 QNC</span>
                                        <span class="stat-label">Daily Rewards</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-value">0 QNC</span>
                                        <span class="stat-label">Total Earned</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Solana Content -->
                    <div id="solana-content" class="network-content hidden">
                        <!-- Tabs -->
                        <nav class="tabs-nav">
                            <button class="tab-button active" data-tab="solana-tokens">Assets</button>
                            <button class="tab-button" data-tab="solana-activation">Activate</button>
                        </nav>

                        <!-- Solana Assets Tab -->
                        <div class="tab-content" id="solana-tokens-tab">
                            <ul id="solana-token-list" class="token-list modern">
                                <!-- Solana tokens will be populated here -->
                            </ul>
                        </div>

                        <!-- Solana Activation Tab -->
                        <div class="tab-content hidden" id="solana-activation-tab">
                            <div class="activation-card modern">
                                <div class="activation-header">
                                    <h3>Phase 1 Activation</h3>
                                    <p>Burn 1DEV tokens to activate your QNet node</p>
                                </div>
                                
                                <div class="pricing-info" id="pricing-info">
                                    <div class="price-card">
                                        <span class="price-label">Current Price</span>
                                        <span class="price-value">1,500 1DEV</span>
                                        <span class="price-savings">Standard pricing</span>
                                    </div>
                                </div>
                                
                                <div class="node-type-selector">
                                    <div class="node-option active" data-type="light">
                                        <span class="node-emoji">L</span>
                                        <span class="node-name">Light Node</span>
                                    </div>
                                    <div class="node-option" data-type="full">
                                        <span class="node-emoji">F</span>
                                        <span class="node-name">Full Node</span>
                                    </div>
                                    <div class="node-option" data-type="super">
                                        <span class="node-emoji">S</span>
                                        <span class="node-name">Super Node</span>
                                    </div>
                                </div>
                                
                                <button id="burn-activate-button" class="qnet-button primary gradient">
                                    Burn & Activate
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal-overlay hidden">
            <div class="modal-box modern">
                <div class="modal-header">
                    <h3>⚙️ Wallet Settings</h3>
                    <button id="close-settings" class="close-button">✕</button>
                </div>
                
                <div class="settings-content">
                    <div class="setting-group">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>🌐 Network Environment</h4>
                                <p>Switch between testnet and mainnet</p>
                            </div>
                            <select id="network-select" class="setting-select modern">
                                <option value="testnet">🧪 Testnet (Development)</option>
                                <option value="mainnet">🚀 Mainnet (Production)</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>🔒 Auto-Lock Timer</h4>
                                <p>Automatically lock wallet after inactivity</p>
                            </div>
                            <select id="autolock-select" class="setting-select modern">
                                <option value="0">Never</option>
                                <option value="60">1 minute</option>
                                <option value="300">5 minutes</option>
                                <option value="900" selected>15 minutes</option>
                                <option value="1800">30 minutes</option>
                                <option value="3600">1 hour</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>🌐 Language</h4>
                                <p>Wallet interface language</p>
                            </div>
                            <select id="language-select" class="setting-select modern">
                                <option value="en" selected>🇺🇸 English</option>
                                <option value="zh">🇨🇳 中文 (Chinese)</option>
                                <option value="ko">🇰🇷 한국어 (Korean)</option>
                                <option value="ja">🇯🇵 日本語 (Japanese)</option>
                                <option value="ru">🇷🇺 Русский (Russian)</option>
                                <option value="es">🇪🇸 Español (Spanish)</option>
                                <option value="pt">🇵🇹 Português (Portuguese)</option>
                                <option value="fr">🇫🇷 Français (French)</option>
                                <option value="de">🇩🇪 Deutsch (German)</option>
                                <option value="it">🇮🇹 Italiano (Italian)</option>
                                <option value="ar">🇸🇦 العربية (Arabic)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>🔐 Security Options</h4>
                                <p>Manage wallet security settings</p>
                            </div>
                            <div class="setting-actions">
                                <button id="change-password-button" class="qnet-button secondary modern">Change Password</button>
                                <button id="show-seed-button" class="qnet-button secondary modern">Show Recovery Phrase</button>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>🔗 Connected dApps</h4>
                                <p>Manage blockchain app connections</p>
                            </div>
                            <div class="setting-actions">
                                <button id="manage-connections-button" class="qnet-button secondary modern">Manage Connections</button>
                                <div id="connected-sites-count" class="setting-note">0 sites connected</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-group danger-zone">
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>⚠️ Danger Zone</h4>
                                <p>Irreversible actions - use with extreme caution</p>
                            </div>
                            <div class="setting-actions">
                                <button id="reset-wallet-button" class="qnet-button danger modern">Reset Wallet</button>
                                <button id="clear-data-button" class="qnet-button danger modern">Clear All Data</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Receive Modal -->
        <div id="receive-modal" class="modal-overlay hidden">
            <div class="modal-box modern">
                <div class="modal-header">
                    <h3>📥 Receive <span id="receive-network-name">QNC</span></h3>
                    <button class="close-button" id="close-receive-modal">✕</button>
                </div>
                <div class="receive-content">
                    <div class="qr-container" id="qr-container">
                        <canvas id="qr-canvas"></canvas>
                    </div>
                    <div class="address-display">
                        <div class="address-text" id="receive-address">Loading...</div>
                        <button class="copy-address-btn" id="copy-receive-address-btn">📋 Copy Address</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Account Select Modal -->
        <div id="account-select-modal" class="modal-overlay hidden">
            <div class="modal-box modern">
                <div class="modal-header">
                    <h3>👤 Select Account</h3>
                    <button id="close-account-select" class="close-button">✕</button>
                </div>
                
                <div id="account-list" class="account-list">
                    <!-- Accounts will be populated dynamically -->
                </div>
                
                <div class="modal-actions">
                    <button id="create-account-button" class="qnet-button secondary modern">✨ Create Account</button>
                    <button id="import-account-button" class="qnet-button secondary modern">📥 Import Account</button>
                </div>
            </div>
        </div>

        <!-- Wallet Setup Modal -->
        <div id="wallet-setup-modal" class="modal-overlay hidden">
            <div class="modal-box large modern">
                <div class="modal-header">
                    <h3 id="setup-modal-title">✨ Create New Wallet</h3>
                    <button id="close-setup" class="close-button">✕</button>
                </div>
                
                <div id="setup-content" class="setup-content">
                    <!-- Create Wallet -->
                    <div id="create-wallet-content" class="setup-step">
                        <div class="step-header">
                            <h4>Create Your QNet Dual Wallet</h4>
                            <p>Secure HD wallet supporting both Solana and QNet networks</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="new-password">Create Password</label>
                            <input type="password" id="new-password" placeholder="Enter a strong password" 
                                   autocomplete="new-password" minlength="8" />
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm-password">Confirm Password</label>
                            <input type="password" id="confirm-password" placeholder="Confirm your password" 
                                   autocomplete="new-password" minlength="8" />
                        </div>
                        
                        <div id="password-create-error" class="inline-error hidden"></div>
                        
                        <div class="password-requirements">
                            <p>Password requirements:</p>
                            <ul>
                                <li>At least 8 characters</li>
                                <li>Upper and lowercase letters</li>
                                <li>Numbers and special characters</li>
                            </ul>
                        </div>
                        
                        <button id="generate-wallet-button" class="qnet-button primary gradient full-width">
                            ✨ Generate Dual Wallet
                        </button>
                    </div>
                    
                    <!-- Import Wallet -->
                    <div id="import-wallet-content" class="setup-step hidden">
                        <div class="step-header">
                            <h4>Import Existing Wallet</h4>
                            <p>Import using 12 or 24-word recovery phrase (BIP39 compatible)</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="seed-phrase-input">Recovery Phrase</label>
                            <textarea id="seed-phrase-input" 
                                      placeholder="Enter your 12 or 24-word recovery phrase separated by spaces" 
                                      rows="4" autocomplete="off" spellcheck="false" autocorrect="off"></textarea>
                            <div class="input-hint">
                                Compatible with MetaMask, Phantom, and all BIP39 wallets
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="import-password">Set New Password</label>
                            <input type="password" id="import-password" placeholder="Create a password for this wallet" 
                                   autocomplete="new-password" minlength="8" />
                        </div>
                        
                        <div id="import-error" class="inline-error hidden"></div>
                        
                        <button id="import-wallet-confirm-button" class="qnet-button primary gradient full-width">
                            📥 Import Dual Wallet
                        </button>
                    </div>
                    
                    <!-- Seed Phrase Display -->
                    <div id="seed-phrase-display" class="setup-step hidden">
                        <div class="step-header">
                            <h4>⚠️ Save Your Recovery Phrase</h4>
                            <p>Write down these 12 words in order and keep them safe:</p>
                        </div>
                        
                        <div id="seed-phrase-words" class="seed-phrase-grid">
                            <!-- Seed words will be populated here -->
                        </div>
                        
                        <div class="seed-actions">
                            <button id="copy-seed-button" class="qnet-button secondary modern">
                                📋 Copy to Clipboard
                            </button>
                            <button id="download-seed-button" class="qnet-button secondary modern">
                                💾 Download as File
                            </button>
                        </div>
                        
                        <div class="seed-warnings">
                            <div class="warning-item">
                                <span class="warning-icon">⚠️</span>
                                <span>Never share your recovery phrase with anyone!</span>
                            </div>
                            <div class="warning-item">
                                <span class="warning-icon">🔒</span>
                                <span>QNet cannot recover lost recovery phrases.</span>
                            </div>
                            <div class="warning-item">
                                <span class="warning-icon">💡</span>
                                <span>Store multiple copies in secure locations.</span>
                            </div>
                        </div>
                        
                        <button id="seed-confirmed-button" class="qnet-button primary gradient full-width">
                            ✅ I've Saved My Recovery Phrase
                        </button>
                    </div>
                    
                    <!-- Seed Phrase Verification -->
                    <div id="seed-verification" class="setup-step hidden">
                        <div class="step-header">
                            <h4>🔍 Verify Your Recovery Phrase</h4>
                            <p>Select the correct words to confirm you saved it correctly:</p>
                        </div>
                        
                        <div id="verification-fields" class="verification-container">
                            <!-- Verification fields will be populated here -->
                        </div>
                        
                        <div id="verification-error" class="inline-error hidden"></div>
                        
                        <div class="verification-actions">
                            <button id="back-to-seed-button" class="qnet-button secondary modern">
                                ← Back to Recovery Phrase
                            </button>
                            <button id="verify-seed-button" class="qnet-button primary gradient" disabled>
                                ✅ Verify & Complete Setup
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load production version with working interface -->
    <script src="popup.js"></script>
</body>
</html> 