{% extends "base.html" %}
{% block title %}Transaction {{ tx.hash }} - QNet Explorer{% endblock %}
{% block header %}Transaction Details{% endblock %}

{% block content %}
<div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
        <span>Transaction Information</span>
        <a href="{{ url_for('explorer') }}" class="btn btn-sm btn-secondary">Back to Explorer</a>
    </div>
    <div class="card-body">
        <table class="table">
            <tbody>
                <tr>
                    <th style="width: 20%">Transaction Hash</th>
                    <td><code>{{ tx.hash }}</code></td>
                </tr>
                <tr>
                    <th>Status</th>
                    <td>
                        {% if tx.confirmation_status == "confirmed" %}
                        <span class="badge bg-success">Confirmed</span>
                        {% else %}
                        <span class="badge bg-warning">Pending</span>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>Block</th>
                    <td>
                        {% if tx.block_height is defined %}
                        <a href="{{ url_for('block_detail', height=tx.block_height) }}">{{ tx.block_height }}</a>
                        {% else %}
                        Pending
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>Timestamp</th>
                    <td>
                        {% if tx.block_time is defined %}
                        {{ tx.block_time }}
                        {% else %}
                        Pending
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>From</th>
                    <td>
                        {% if tx.sender == "network" %}
                        <span class="badge bg-success">Coinbase (Block Reward)</span>
                        {% else %}
                        <a href="{{ url_for('address_detail', address=tx.sender) }}">{{ tx.sender }}</a>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>To</th>
                    <td><a href="{{ url_for('address_detail', address=tx.recipient) }}">{{ tx.recipient }}</a></td>
                </tr>
                <tr>
                    <th>Amount</th>
                    <td>{{ tx.amount }} QNet</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

{% if tx.block_height is defined %}
<div class="card">
    <div class="card-header">
        Block Information
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <p><strong>Block Height:</strong> <a href="{{ url_for('block_detail', height=tx.block_height) }}">{{ tx.block_height }}</a></p>
                <p><strong>Block Hash:</strong> <code>{{ tx.block_hash[:10] }}...</code></p>
            </div>
            <div class="col-md-6">
                <p><strong>Block Time:</strong> {{ tx.block_time }}</p>
                <p><strong>Transaction Index:</strong> {{ tx.transaction_index }}</p>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}